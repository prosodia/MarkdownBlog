<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="/styles.css">
    </head>
    <body>
        <%- include("../partials/nav.ejs") %>

        <div class="pt-3 container text-left align-items-center">
            <div class="content">
            
                <h2 class="text-left">
                    <%= blog.title %>
                </h2>
                <hr class="dropdown-divider">
                <div class="content">
                    <p class="text-left">
                        <%- blog.body %>
                    </p>
                </div>
                <a class="delete" data-doc="<%= blog._id %>">
                    Delete blog 
                </a>
            </div>
        </div>

        <%- include("../partials/footer.ejs") %>

            <script>
                const trashcan = document.querySelector('a.delete');
                trashcan.addEventListener('click', (e) => {
                    const endpoint = `/blogs/${trashcan.dataset.doc}`;
                    fetch(endpoint, {
                        method: 'DELETE',
                    })
                        .then(response => response.json())
                        .then(data => window.location.href = data.redirect)
                        .catch(err => console.log(err));
                });
            </script>
        
        <script src="" async defer></script>
    </body>
</html>
